<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>3 Bivariate Categorical Data | S2S Lab 4</title>
  <meta name="description" content="3 Bivariate Categorical Data | S2S Lab 4" />
  <meta name="generator" content="bookdown 0.33 and GitBook 2.6.7" />

  <meta property="og:title" content="3 Bivariate Categorical Data | S2S Lab 4" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="3 Bivariate Categorical Data | S2S Lab 4" />
  
  
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="quantitative-data.html"/>
<link rel="next" href="ggplot2.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<link href="libs/bsTable-3.3.7/bootstrapTable.min.css" rel="stylesheet" />
<script src="libs/bsTable-3.3.7/bootstrapTable.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="include/webex.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Qualitative Data</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#sec:tables"><i class="fa fa-check"></i><b>1.1</b> Tables</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#sec:bars"><i class="fa fa-check"></i><b>1.2</b> Barplots</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#sec:dots"><i class="fa fa-check"></i><b>1.3</b> Dot Charts</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#sec:pies"><i class="fa fa-check"></i><b>1.4</b> Pie Charts</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="quantitative-data.html"><a href="quantitative-data.html"><i class="fa fa-check"></i><b>2</b> Quantitative Data</a>
<ul>
<li class="chapter" data-level="2.1" data-path="quantitative-data.html"><a href="quantitative-data.html#stem-and-leaf-plots"><i class="fa fa-check"></i><b>2.1</b> Stem and Leaf Plots</a></li>
<li class="chapter" data-level="2.2" data-path="quantitative-data.html"><a href="quantitative-data.html#strip-charts"><i class="fa fa-check"></i><b>2.2</b> Strip Charts</a></li>
<li class="chapter" data-level="2.3" data-path="quantitative-data.html"><a href="quantitative-data.html#histograms"><i class="fa fa-check"></i><b>2.3</b> Histograms</a></li>
<li class="chapter" data-level="2.4" data-path="quantitative-data.html"><a href="quantitative-data.html#kernel-density-estimators"><i class="fa fa-check"></i><b>2.4</b> Kernel Density Estimators</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="bivariate-categorical-data.html"><a href="bivariate-categorical-data.html"><i class="fa fa-check"></i><b>3</b> Bivariate Categorical Data</a>
<ul>
<li class="chapter" data-level="3.1" data-path="bivariate-categorical-data.html"><a href="bivariate-categorical-data.html#two-way-contingency-tables"><i class="fa fa-check"></i><b>3.1</b> Two-Way Contingency Tables</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="ggplot2.html"><a href="ggplot2.html"><i class="fa fa-check"></i><b>4</b> <code>ggplot2()</code></a></li>
<li class="chapter" data-level="5" data-path="further-exercises.html"><a href="further-exercises.html"><i class="fa fa-check"></i><b>5</b> Further Exercises</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">S2S Lab 4</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="bivariate-categorical-data" class="section level1 hasAnchor" number="3">
<h1><span class="header-section-number">3</span> Bivariate Categorical Data<a href="bivariate-categorical-data.html#bivariate-categorical-data" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<!--should this section go after quantitative data?-->
<p>In Section <a href="index.html#sec:qual">1</a>, we have already looked at different ways to visualise information about one categorical (or qualitative) variable. Because only one variable was considered, this is called univariate data.</p>
<p>We will now turn our attention to bivariate categorical data. This means we will look at ways to visualise information about two categorical variables at the same time. We can expand upon some of the methods we have already learned to allow two categorical variables to be considered.</p>
<p>Some of the methods to visualise bivariate categorical data include</p>
<ul>
<li>tables</li>
<li>barplots</li>
</ul>
<div id="two-way-contingency-tables" class="section level2 hasAnchor" number="3.1">
<h2><span class="header-section-number">3.1</span> Two-Way Contingency Tables<a href="bivariate-categorical-data.html#two-way-contingency-tables" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>In Section <a href="index.html#sec:tables">1.1</a> we looked at the use of the <code>table()</code> function to create frequency tables for one categorical variable. We can expand upon the use of this function so that frequency tables of two categorical variables can be created. These are known as two-way contingency tables.</p>
<p>In order to create a two-way contingency table, simply provide the second categorical variable you wish to use as an additional argument.</p>
<p>The data set <code>EPIDURAL</code> contains a variable "doctor" which indicates the physician (Dr. A, Dr. B, Dr. C or Dr. D) who administered the epidural anesthesia. Table <a href="bivariate-categorical-data.html#tab:contingency-table">3.1</a> shows the number of patients who fall into each level of the "doctor" and "ease" variables.</p>
<table>
<caption>
<span id="tab:contingency-table">Table 3.1: </span>Two-way contingency table of "Doctor" by "Ease".
</caption>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:right;">
Easy
</th>
<th style="text-align:right;">
Difficult
</th>
<th style="text-align:right;">
Impossible
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;font-weight: bold;">
Dr. A
</td>
<td style="text-align:right;">
19
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
Dr. B
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
4
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
Dr. C
</td>
<td style="text-align:right;">
18
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
Dr. D
</td>
<td style="text-align:right;">
13
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
3
</td>
</tr>
</tbody>
</table>
<p>We can recreate Table <a href="bivariate-categorical-data.html#tab:contingency-table">3.1</a> in R using the following code.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="bivariate-categorical-data.html#cb26-1" tabindex="-1"></a>epi_tab <span class="ot">&lt;-</span> <span class="fu">table</span>(EPIDURAL<span class="sc">$</span>doctor, EPIDURAL<span class="sc">$</span>ease)</span>
<span id="cb26-2"><a href="bivariate-categorical-data.html#cb26-2" tabindex="-1"></a>epi_tab</span></code></pre></div>
<pre><code>       
        Easy Difficult Impossible
  Dr. A   19         3          1
  Dr. B    7        10          4
  Dr. C   18         3          0
  Dr. D   13         4          3</code></pre>
<p>Barplots are a useful tool to present the information from a two-way contingency table graphically. For example, we can produce a barplot, which shows the same counts as in Table <a href="bivariate-categorical-data.html#tab:contingency-table">3.1</a>, using the following code.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="bivariate-categorical-data.html#cb28-1" tabindex="-1"></a><span class="fu">barplot</span>(<span class="at">height =</span> epi_tab,</span>
<span id="cb28-2"><a href="bivariate-categorical-data.html#cb28-2" tabindex="-1"></a>        <span class="at">legend.text =</span> <span class="cn">TRUE</span>,</span>
<span id="cb28-3"><a href="bivariate-categorical-data.html#cb28-3" tabindex="-1"></a>        <span class="at">col =</span> <span class="fu">c</span>(<span class="st">&quot;lightblue2&quot;</span>, <span class="st">&quot;lightsalmon&quot;</span>, <span class="st">&quot;khaki1&quot;</span>, <span class="st">&quot;plum&quot;</span>),</span>
<span id="cb28-4"><a href="bivariate-categorical-data.html#cb28-4" tabindex="-1"></a>        <span class="at">main =</span> <span class="st">&quot;Number of patients treated by each physician in each level of Ease&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/bi2-1.png" width="672" /></p>
<p>This code uses the <code>barplot()</code> function introduced in Section <a href="index.html#sec:bars">1.2</a> and provides the two-way contingency table <code>epi_tab</code> to the argument <code>height =</code>. This means that all the values in this table will be used to construct the height of the bars. Because the bars for each doctor are on top of each other, this is known as a "stacked" barplot.</p>
<p>The argument <code>legend.text = TRUE</code> has also been included so that a legend, indicating the different physicians, is included in the plot.</p>
<p>If we instead wanted to produce a barplot where there is a separate bar for each doctor within each level of the "ease" variable, then we need to include the argument <code>beside = TRUE</code>.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="bivariate-categorical-data.html#cb29-1" tabindex="-1"></a><span class="fu">barplot</span>(<span class="at">height =</span> epi_tab,</span>
<span id="cb29-2"><a href="bivariate-categorical-data.html#cb29-2" tabindex="-1"></a>        <span class="at">legend.text =</span> <span class="cn">TRUE</span>,</span>
<span id="cb29-3"><a href="bivariate-categorical-data.html#cb29-3" tabindex="-1"></a>        <span class="at">beside =</span> <span class="cn">TRUE</span>,</span>
<span id="cb29-4"><a href="bivariate-categorical-data.html#cb29-4" tabindex="-1"></a>        <span class="at">col =</span> <span class="fu">c</span>(<span class="st">&quot;lightblue2&quot;</span>, <span class="st">&quot;lightsalmon&quot;</span>, <span class="st">&quot;khaki1&quot;</span>, <span class="st">&quot;plum&quot;</span>),</span>
<span id="cb29-5"><a href="bivariate-categorical-data.html#cb29-5" tabindex="-1"></a>        <span class="at">main =</span> <span class="st">&quot;Number of patients treated by each physician in each level of Ease&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/bi3-1.png" width="672" /></p>
<p>Another option for presenting this information would be to create a barplot where the different doctors are along the x-axis and the levels of "ease" are used to create the individual bars. In order to do this, we need to transpose the two-way contingency table that is given to the <code>height =</code> argument in the <code>barplot()</code> function.</p>
<p>Transposing a table can easily be achieved using the function <code>t()</code>. The only argument needed is the table you wish to transpose.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="bivariate-categorical-data.html#cb30-1" tabindex="-1"></a><span class="fu">t</span>(epi_tab)</span></code></pre></div>
<pre><code>            
             Dr. A Dr. B Dr. C Dr. D
  Easy          19     7    18    13
  Difficult      3    10     3     4
  Impossible     1     4     0     3</code></pre>
<p>We can then create the following barplots using the transposed <code>epi_tab</code> table.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="bivariate-categorical-data.html#cb32-1" tabindex="-1"></a><span class="fu">barplot</span>(<span class="at">height =</span> <span class="fu">t</span>(epi_tab),</span>
<span id="cb32-2"><a href="bivariate-categorical-data.html#cb32-2" tabindex="-1"></a>        <span class="at">legend.text =</span> <span class="cn">TRUE</span>,</span>
<span id="cb32-3"><a href="bivariate-categorical-data.html#cb32-3" tabindex="-1"></a>        <span class="at">col =</span> <span class="fu">c</span>(<span class="st">&quot;darkseagreen2&quot;</span>, <span class="st">&quot;peachpuff&quot;</span>, <span class="st">&quot;darkslategray3&quot;</span>),</span>
<span id="cb32-4"><a href="bivariate-categorical-data.html#cb32-4" tabindex="-1"></a>        <span class="at">main =</span> <span class="st">&quot;Number of patients treated by each physician in each level of Ease&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/bi5-1.png" width="672" /></p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="bivariate-categorical-data.html#cb33-1" tabindex="-1"></a><span class="fu">barplot</span>(<span class="at">height =</span> <span class="fu">t</span>(epi_tab),</span>
<span id="cb33-2"><a href="bivariate-categorical-data.html#cb33-2" tabindex="-1"></a>        <span class="at">legend.text =</span> <span class="cn">TRUE</span>,</span>
<span id="cb33-3"><a href="bivariate-categorical-data.html#cb33-3" tabindex="-1"></a>        <span class="at">beside =</span> <span class="cn">TRUE</span>,</span>
<span id="cb33-4"><a href="bivariate-categorical-data.html#cb33-4" tabindex="-1"></a>        <span class="at">col =</span> <span class="fu">c</span>(<span class="st">&quot;darkseagreen2&quot;</span>, <span class="st">&quot;peachpuff&quot;</span>, <span class="st">&quot;darkslategray3&quot;</span>),</span>
<span id="cb33-5"><a href="bivariate-categorical-data.html#cb33-5" tabindex="-1"></a>        <span class="at">main =</span> <span class="st">&quot;Number of patients treated by each physician in each level of Ease&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/bi5-2.png" width="672" /></p>
<p>It is often better to present relationships using proportions, rather than counts. In order to calculate that proportions (either out of the total number of observations, row totals or column totals) from a two-way contingency table, we can use the function <code>prop.table()</code>. This function was introduced in Lab 3. <!--link to lab 3--></p>
<p>To create a barplot which shows the proportion of patients who were in each level of the "ease" variable out of the total number of patients seen by a given doctor, we would first need to calculate these proportions in <code>epi_tab</code>. This can be done by using the argument <code>margin = 1</code> within the <code>prop.table()</code> function.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="bivariate-categorical-data.html#cb34-1" tabindex="-1"></a>epi_prop_tab <span class="ot">&lt;-</span> <span class="fu">prop.table</span>(<span class="at">x =</span> epi_tab, <span class="at">margin =</span> <span class="dv">1</span>)</span>
<span id="cb34-2"><a href="bivariate-categorical-data.html#cb34-2" tabindex="-1"></a>epi_prop_tab</span></code></pre></div>
<pre><code>       
              Easy  Difficult Impossible
  Dr. A 0.82608696 0.13043478 0.04347826
  Dr. B 0.33333333 0.47619048 0.19047619
  Dr. C 0.85714286 0.14285714 0.00000000
  Dr. D 0.65000000 0.20000000 0.15000000</code></pre>
<p>Now we can see, for example, that Dr. A found it easy to feel the bone landmarks of 82.6% of their patients, found it difficult in 13.0% of their patients and impossible in 4.3% of their patients.</p>
<p>We can graphically present these proportions for all doctors in a barplot using the following code. Because the proportions are calculated out of the total number of patients each doctor has seen, it makes sense to plot the physicians along the x-axis.</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="bivariate-categorical-data.html#cb36-1" tabindex="-1"></a><span class="fu">barplot</span>(<span class="at">height =</span> <span class="fu">t</span>(epi_prop_tab),</span>
<span id="cb36-2"><a href="bivariate-categorical-data.html#cb36-2" tabindex="-1"></a>        <span class="at">legend.text =</span> <span class="cn">TRUE</span>,</span>
<span id="cb36-3"><a href="bivariate-categorical-data.html#cb36-3" tabindex="-1"></a>        <span class="at">beside =</span> <span class="cn">TRUE</span>,</span>
<span id="cb36-4"><a href="bivariate-categorical-data.html#cb36-4" tabindex="-1"></a>        <span class="at">col =</span> <span class="fu">c</span>(<span class="st">&quot;darkseagreen2&quot;</span>, <span class="st">&quot;peachpuff&quot;</span>, <span class="st">&quot;darkslategray3&quot;</span>),</span>
<span id="cb36-5"><a href="bivariate-categorical-data.html#cb36-5" tabindex="-1"></a>        <span class="at">main =</span> <span class="st">&quot;Proportion of doctor&#39;s patients in each level of Ease variable&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/bi7-1.png" width="672" /></p>

</div>
</div>
<script>

/* update total correct if #webex-total_correct exists */
update_total_correct = function() {
  console.log("webex: update total_correct");

  var t = document.getElementsByClassName("webex-total_correct");
  for (var i = 0; i < t.length; i++) {
    p = t[i].parentElement;
    var correct = p.getElementsByClassName("webex-correct").length;
    var solvemes = p.getElementsByClassName("webex-solveme").length;
    var radiogroups = p.getElementsByClassName("webex-radiogroup").length;
    var selects = p.getElementsByClassName("webex-select").length;

    t[i].innerHTML = correct + " of " + (solvemes + radiogroups + selects) + " correct";
  }
}

/* webex-solution button toggling function */
b_func = function() {
  console.log("webex: toggle hide");

  var cl = this.parentElement.classList;
  if (cl.contains('open')) {
    cl.remove("open");
  } else {
    cl.add("open");
  }
}

/* check answers */
check_func = function() {
  console.log("webex: check answers");

  var cl = this.parentElement.classList;
  if (cl.contains('unchecked')) {
    cl.remove("unchecked");
    this.innerHTML = "Hide Answers";
  } else {
    cl.add("unchecked");
    this.innerHTML = "Show Answers";
  }
}

/* function for checking solveme answers */
solveme_func = function(e) {
  console.log("webex: check solveme");

  var real_answers = JSON.parse(this.dataset.answer);
  var my_answer = this.value;
  var cl = this.classList;
  if (cl.contains("ignorecase")) {
    my_answer = my_answer.toLowerCase();
  }
  if (cl.contains("nospaces")) {
    my_answer = my_answer.replace(/ /g, "")
  }

  if (my_answer == "") {
    cl.remove("webex-correct");
    cl.remove("webex-incorrect");
  } else if (real_answers.includes(my_answer)) {
    cl.add("webex-correct");
    cl.remove("webex-incorrect");
  } else {
    cl.add("webex-incorrect");
    cl.remove("webex-correct");
  }

  // match numeric answers within a specified tolerance
  if(this.dataset.tol > 0){
    var tol = JSON.parse(this.dataset.tol);
    var matches = real_answers.map(x => Math.abs(x - my_answer) < tol)
    if (matches.reduce((a, b) => a + b, 0) > 0) {
      cl.add("webex-correct");
    } else {
      cl.remove("webex-correct");
    }
  }

  // added regex bit
  if (cl.contains("regex")){
    answer_regex = RegExp(real_answers.join("|"))
    if (answer_regex.test(my_answer)) {
      cl.add("webex-correct");
    }
  }

  update_total_correct();
}

/* function for checking select answers */
select_func = function(e) {
  console.log("webex: check select");

  var cl = this.classList

  /* add style */
  cl.remove("webex-incorrect");
  cl.remove("webex-correct");
  if (this.value == "answer") {
    cl.add("webex-correct");
  } else if (this.value != "blank") {
    cl.add("webex-incorrect");
  }

  update_total_correct();
}

/* function for checking radiogroups answers */
radiogroups_func = function(e) {
  console.log("webex: check radiogroups");

  var checked_button = document.querySelector('input[name=' + this.id + ']:checked');
  var cl = checked_button.parentElement.classList;
  var labels = checked_button.parentElement.parentElement.children;

  /* get rid of styles */
  for (i = 0; i < labels.length; i++) {
    labels[i].classList.remove("webex-incorrect");
    labels[i].classList.remove("webex-correct");
  }

  /* add style */
  if (checked_button.value == "answer") {
    cl.add("webex-correct");
  } else {
    cl.add("webex-incorrect");
  }

  update_total_correct();
}

window.onload = function() {
  console.log("webex onload");
  /* set up solution buttons */
  var buttons = document.getElementsByTagName("button");

  for (var i = 0; i < buttons.length; i++) {
    if (buttons[i].parentElement.classList.contains('webex-solution')) {
      buttons[i].onclick = b_func;
    }
  }

  var check_sections = document.getElementsByClassName("webex-check");
  console.log("check:", check_sections.length);
  for (var i = 0; i < check_sections.length; i++) {
    check_sections[i].classList.add("unchecked");

    let btn = document.createElement("button");
    btn.innerHTML = "Show Answers";
    btn.classList.add("webex-check-button");
    btn.onclick = check_func;
    check_sections[i].appendChild(btn);

    let spn = document.createElement("span");
    spn.classList.add("webex-total_correct");
    check_sections[i].appendChild(spn);
  }

  /* set up webex-solveme inputs */
  var solveme = document.getElementsByClassName("webex-solveme");

  for (var i = 0; i < solveme.length; i++) {
    /* make sure input boxes don't auto-anything */
    solveme[i].setAttribute("autocomplete","off");
    solveme[i].setAttribute("autocorrect", "off");
    solveme[i].setAttribute("autocapitalize", "off");
    solveme[i].setAttribute("spellcheck", "false");
    solveme[i].value = "";

    /* adjust answer for ignorecase or nospaces */
    var cl = solveme[i].classList;
    var real_answer = solveme[i].dataset.answer;
    if (cl.contains("ignorecase")) {
      real_answer = real_answer.toLowerCase();
    }
    if (cl.contains("nospaces")) {
      real_answer = real_answer.replace(/ /g, "");
    }
    solveme[i].dataset.answer = real_answer;

    /* attach checking function */
    solveme[i].onkeyup = solveme_func;
    solveme[i].onchange = solveme_func;

    solveme[i].insertAdjacentHTML("afterend", " <span class='webex-icon'></span>")
  }

  /* set up radiogroups */
  var radiogroups = document.getElementsByClassName("webex-radiogroup");
  for (var i = 0; i < radiogroups.length; i++) {
    radiogroups[i].onchange = radiogroups_func;
  }

  /* set up selects */
  var selects = document.getElementsByClassName("webex-select");
  for (var i = 0; i < selects.length; i++) {
    selects[i].onchange = select_func;
    selects[i].insertAdjacentHTML("afterend", " <span class='webex-icon'></span>")
  }

  update_total_correct();
}

</script>
            </section>

          </div>
        </div>
      </div>
<a href="quantitative-data.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="ggplot2.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": null,
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection",
"scroll_highlight": true
},
"info": true
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
